From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Moderocky <admin@moderocky.com>
Date: Sat, 5 Sep 2020 10:04:30 +0100
Subject: [PATCH] Exceptions for missing attachments.


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
index b7ae89f15a78233e5b242ef923313fbd45be1ef3..d9d734a80b721325faaee6671239b9265b24e9d7 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
@@ -205,7 +205,11 @@ public abstract class CraftEntity implements org.bukkit.entity.Entity {
     @Override
     @SuppressWarnings("unchecked")
     public <T extends Attachment<?>> T getAttachment(Class<T> attachmentClass) {
-        return (T) attachments.get(attachmentClass); // This cast is fine
+        T attachment = (T) attachments.get(attachmentClass); // This cast is fine
+        if (attachment == null) {
+            throw new NullPointerException("No attachment for this class has been registered.");
+        }
+        return attachment;
     }
 
     @Override
