From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Moderocky <admin@moderocky.com>
Date: Mon, 21 Sep 2020 10:51:11 +0100
Subject: [PATCH] Re-add fall event.


diff --git a/src/main/java/net/minecraft/server/Entity.java b/src/main/java/net/minecraft/server/Entity.java
index 5e1978d1c96dede07ead967c1e85a352348e7777..913ff1f5eb00fe51ca438ef5cb12ad455529ab94 100644
--- a/src/main/java/net/minecraft/server/Entity.java
+++ b/src/main/java/net/minecraft/server/Entity.java
@@ -18,6 +18,8 @@ import java.util.UUID;
 import java.util.concurrent.atomic.AtomicInteger;
 import java.util.stream.Stream;
 import javax.annotation.Nullable;
+
+import mx.kenzie.wellspring.event.EntityLandEvent;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
@@ -629,7 +631,11 @@ public abstract class Entity implements INamableTileEntity, ICommandListener, Ke
             this.world.getMethodProfiler().enter("rest");
             this.positionChanged = !MathHelper.b(vec3d.x, vec3d1.x) || !MathHelper.b(vec3d.z, vec3d1.z);
             this.v = vec3d.y != vec3d1.y;
+            boolean previousOnGround = this.onGround; // Kenzie - previous
             this.onGround = this.v && vec3d.y < 0.0D;
+            if (onGround && !previousOnGround) { // Kenzie - Fall event
+                new EntityLandEvent(getBukkitEntity()).callEvent();
+            }
             BlockPosition blockposition = this.ao();
             IBlockData iblockdata = this.world.getType(blockposition);
 
